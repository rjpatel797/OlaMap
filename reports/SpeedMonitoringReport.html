 <script src="js/Report.js"></script>
      <meta http-equiv="content-type" content="application/json; charset=utf-8">
         <script type="text/javascript">
        function onspeed()
        {
            if($("#interval").val() < 30)
                {
            $("#googles").attr("disabled", true);
                }
                else
                    {
                        $("#googles").removeAttr("disabled", true);
                    }
        }
        function updatedeviceid(reset)
        {
            deviceidhtml = "";
            
            for(i=0;i<reset.length;i++){
                
               deviceidhtml += "<option value="+reset[i][0]+">"+reset[i][1]+"</option>";
              // alert("deviceidhtml is"+deviceidhtml);
                       
            } 
          
          
          //  document.getElementById("deviceid").innerHTML = deviceidhtml;
            
            //DWRUtil.addOptions("deviceid",resset);
        }
         
           function setcookie()
               {
                   $.cookie('startdate',  $("#fromdate").val());
                   $.cookie('enddate', $("#todate").val());
                   $.cookie('did', $("#deviceId").val());
               }
        </script>
      <section class="content">
<input type="hidden" name="reportname" id="reportname" value="Speed Monitering Report" />
  <!-- SELECT2 EXAMPLE -->
      <div class="box box-default" >
        <div class="box-header with-border" style="background-color: #3C8DBC;">

 <h3 class="box-title" style="margin-left: 45%;color: #ffffff;"> <b>Speed Monitoring Report</b></h3>
  <div class="box-tools pull-right">
            <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
          </div>
           </div>
           <div class="box-body">
           <div class="row">     
        <div class="col-xs-6">
        <label>Date and time range:</label>
                <div class="input-group">
                  <div class="input-group-addon">
                    <i class="fa fa-clock-o"></i>
                  </div>
                  <input type="text" class="form-control pull-right" id="reservationtime">
                </div>
        </div>
          <div class="col-xs-4">
          <label for="deviceId">Device:</label>
           <div id="Getdevice"></div>
          </div>
        <div class="col-xs-2">
         <label for="mtb">Speed :</label>  <br/>
                            <select name="mtd" id="mtd">
                          <option value=10> > 10 km/h</option>
                          <option value=15> > 15 km/h</option><option value=20> > 20 km/h</option><option value=25> > 25 km/h</option><option value=30> > 30 km/h</option><option value=35> > 35 km/h</option><option value=40> > 40 km/h</option><option value=45> > 45 km/h</option><option value=50> > 50 km/h</option><option value=55> > 55 km/h</option><option value=60> > 60 km/h</option><option value=65> > 65 km/h</option><option value=70> > 70 km/h</option><option value=75> > 75 km/h</option><option value=80> > 80 km/h</option><option value=85> > 85 km/h</option><option value=90> > 90 km/h</option><option value=95> > 95 km/h</option><option value=100> > 100 km/h</option><option value=105> > 105 km/h</option><option value=110> > 110 km/h</option><option value=115> > 115 km/h</option><option value=120> > 120 km/h</option><option value=125> > 125 km/h</option><option value=130> > 130 km/h</option><option value=135> > 135 km/h</option><option value=140> > 140 km/h</option><option value=145> > 145 km/h</option>

                        
                            </select>
          
          </div>
        </div>
         <div class="row" style="margin-top: 4%;margin-left: 50%;">
        <div class="col-xs-3 ">
        <input class="btn btn-success" type="button" name="Submit" value="Submit" onclick="submit()" />
        </div>
        </div>
       </div>
       </div>
       
          
      <ul class="nav nav-tabs" role="tablist">
   <li role="presentation" class="active"><a href="#Gridview" aria-controls="Gridview" role="tab" data-toggle="tab" onclick="Gridview()">Grid view</a></li>
    <li role="presentation" ><a href="#Listview" aria-controls="Listview" role="tab" data-toggle="tab" onclick="listview()">List view</a></li> 
<!--     <li role="presentation"><a href="#messages" aria-controls="messages" role="tab" data-toggle="tab">Graphs</a></li> -->
  </ul>

  <!-- Tab panes -->
  <div class="tab-content">
   <div role="tabpanel" class="tab-pane active" id="Gridview" style="margin-top: 1%;">
   <div  id="fleetsummryreportgirdview" style="text-align: center">
  </div>
    <div role="tabpanel" class="tab-pane " id="Listview" ><div  id="fleetsummryreportlistview" style="text-align: center"> </div></div>
   
   <!--  <div role="tabpanel" class="tab-pane" id="Graphsview">...</div> -->
  </div>

</div>
        </section>
         
        
        <div id="dtable"></div>
      
<script>
 /*  $(function () {
    //Initialize Select2 Elements
   
    //Date range picker with time picker
    $('#reservationtime').daterangepicker({timePicker: true, timePickerIncrement: 30, format: 'DD/MM/YYYY hh:mm '});
   
  });
  
  $(".select2").select2(); */
  var msg ="";
  function submit()
  {
	  var date=$("#reservationtime").val();
	  if(date=="" || date==null)
		  {
		  alert("Please select Date And Time");
		  }
	  else if($("#deviceId").val()=="" || $("#deviceId").val()==null)
		  {
		  alert("Please select at least one Device Name");
		  }
	  else{
		  
	  var spilt=date.split("-");
	  
	   var dataarray = new Array();
	  var url=API+"Jsoncontroller?Operation=getspeedremotingreport";
      var query="&did="+$("#deviceId").val()+"&sdate="+spilt[0]+"&edate="+spilt[1]+"&speed="+$("#mtd").val();
	//alert(url+query);
      $.ajax({
          type: "GET",
          url: url+query,
          dataType: "jsonp",
          success: function(msg2) {
        	// alert(msg2);
        	  msg= eval(msg2);
        	  Gridview();
          }
      });
	  }
  }
  
  
  function listview()
  {
  	  var conten="";
  	  $("#fleetsummryreportgirdview").html('');
  	  var inittable= '<table id="expiryreport" class="table table-striped" style="border-color:#3C8DBC;"><thead style="background-color:#3C8DBC; color:white;"><tr><th>Start Time</th><th>End Time</th><th>Duration</th><th>Start Location</th><th>End Location</th><th>Avg Speed(km/h)</th><th>Max Speed(km/h)</th></tr></thead><tbody>';
        var closetable='</tbody></table></div>';
        for(var i=0;i<msg.length;i++)
        {
            conten += '<tr><td>' + msg[i].startdate + '</td><td>' + msg[i].enddate + '</td><td>'+exchangeTime(msg[i].timediff/1000) +'</td><td>'+msg[i].slocation +'</td><td>'+msg[i].elocation+'</td><td>'+msg[i].AvgSpeed+'</td><td>'+msg[i].maxspeed+'</td></tr>';
        }
       
        $("#fleetsummryreportlistview").html(inittable+conten+closetable);
        initdtforreport();
  }
  
  
  function Gridview()
  {
  	$("#fleetsummryreportlistview").html('');
   	var divbody="";
	  var initdiv = '';
	  var closediv='';
      for (var i = 0; i < msg.length; i++)
      {
    	  divbody += '<div class="box box-success"><div id="box-header with-border"><div class="box-body"><div class="row"><div class="col-xs-4" style="text-align: center;"><label>'+ msg[i].startdate+'</label><br/><img src="androimage/starttime.png"> <label> Start Time</label></div><div class="col-xs-4" style="text-align: center;">'+ exchangeTime(msg[i].timediff/1000)+'</label><br/><label>Duration</label></div><div class="col-xs-4" style="text-align: center;"><label style="text-align: center;">'
    	  + msg[i].enddate+'<br/><img src="androimage/endtime.png"> <label> End Time</label></label></div></div><br/><div class="row"><div class="col-xs-4" style="text-align: center;"><label>' +msg[i].AvgSpeed+ 'Km/hr</label><br/><label>Avgrage</label></div><div class="col-xs-4" style="text-align: center;"><img src="androimage/spsix.png"><br/><label>Speed</label>'
          +'</div><div class="col-xs-4" style="text-align: center;"><label>' +msg[i].maxspeed+ ' Km/hr</label><br/><label>Maximum</label></div>'
          +'</div><br/><div class="row"><div class="col-xs-6" style="text-align: center;"><label>' +msg[i].slocation+ '</label><br/><label>Start Location</label></div><div class="col-xs-6" style="text-align: center;"><label>' +msg[i].elocation+ '</label><br/><label>End Location</label></div>'
          +'</div></div></div></div>';
      }
    //  alert(tableheader+tablebody);
    
      $("#fleetsummryreportgirdview").html(initdiv+divbody+closediv);
  }
  function exchangeTime(msecond) {
	    
      var dd,hh,mm,ss;
      var strtip = "";
      if(msecond!=0)
      {
          dd = Math.round(msecond / 86400 + 0.5) - 1;
          hh = Math.round((msecond - dd * 86400) / 3600 + 0.5) - 1;
          mm = Math.round((msecond - dd * 86400 - hh * 3600) / 60 + 0.5) - 1;
          ss = Math.round(msecond - dd * 86400 - hh * 3600 - mm * 60);

          if (dd > 0)
              strtip = strtip + dd + "  day ";
          if (hh > 0)
              strtip = strtip + hh + "  hour ";
          if (mm > 0){
              strtip = strtip + mm + "  mins ";
              if(dd > 0)
                  return strtip;
          }
      }
      else
      {
          strtip="0";  
      }
      // if (ss > 0)
      //    strtip = strtip + ss + " secs";
      return strtip;
  }
  
</script>
