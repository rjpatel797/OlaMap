<!-- <script src="https://maps.googleapis.com/maps/api/js?v=3&libraries=geometry"></script> -->
<script >
var url=API+"Jsoncontroller?Operation=getVehicleByStatus&status="+$("#status").val();
//alert("device==="+device);
$.ajax({
    type: "GET",
    url: url,
    dataType: "jsonp",
    beforeSend: function(HttpRequest) {
    //$("#Lasttrackreport").html(' <img src="images/loading.gif"/>');
    }, success: function(msg2) 
    {	
  	 // alert(msg2);
      var msg = eval(msg2);
      var body="";
      
      for(var i=0;i<msg.length;i++)
      {
    	  var Ignition="";
    	  var AC="";
    	  var power="";
    	  if(msg[i].ignition==false)
    		  {
    		  Ignition='<img src="mipmap/ing_red.png"/><br/><label style="color:red;">Ignition</label>'
    		  }
    	  else if(msg[i].ignition==true)
    		{
    			  Ignition='<img src="mipmap/ing_green.png"/><br/><label style="color:green;">Ignition</label>'
    	    }else
    	    {
        	    Ignition='<img src="mipmap/ing_gray.png"/><br/><label style="color:black;">Ignition</label>'
            }
    	  
    	  
    	  if(msg[i].ac==false)
		  {
    		  AC='<img src="mipmap/ac_red.png"/><br/><label style="color:red;">AC</label>'
		  }else if(msg[i].ac==true)
		  {
    		  AC='<img src="mipmap/ac_green.png"/><br/><label style="color:green;">AC</label>'
		  }else
			  {
			  AC='<img src="mipmap/ac_gray.png" /><br/><label style="color:black;">AC</label>'
			  }
    	  
    	  
    	  if(msg[i].gps==false)
		  {
    		  GPS='<img src="mipmap/gps_red.png"/><br/><label style="color:red;">GPS</label>'
		  }if(msg[i].gps==true)
		  {
    		  GPS='<img src="mipmap/gps_green.png"/><br/><label style="color:green;">GPS</label>'
		  }else
			  {
			  GPS='<img src="mipmap/gps_gray.png"/><br/><label style="color:black;">GPS</label>'
			  }
		  
		  
    	  if(msg[i].power==true)
       	{
       	power='<img src="mipmap/pwr_green.png"/><br/><label style="color:green;">Power</label>';
       	}
           else  if(msg[i].power==false)
       	{
       		power='<img src="mipmap/pwr_red.png"/><br/><label style="color:red;">Power</label>';
       	}    else 
       	{
       		power='<img src="mipmap/pwr_gray.png"/><br/><label style="color:balck;">Power</label>';
       	}       
       	var divbody="";
    	  var initdiv = '';
    	  var closediv='';
          for (var i = 0; i < msg.length; i++)
          {
        	  var didname=msg[i].did+'##'+msg[i].dname;
        	  divbody += '<div class="box box-success"><div id="box-header with-border"><div class="box-body"><div class="row"><div class="col-xs-6" style="text-align: center;"><h3 style="text-align: center;color:blue;" >'+msg[i].dname+'</h3></div><div class="col-xs-6" style="text-align: center;"><h3 style="text-align: center;color:dark gray;">'+msg[i].ddate+'</h3></div></div><div class="row"><div class="col-xs-2" style="text-align: center;">' +Ignition+ '</div><div class="col-xs-2" style="text-align: center;">'
              +AC+'</div><div class="col-xs-2" style="text-align: center;">' +GPS+ '</div><div class="col-xs-2" style="text-align: center;">' +power+ '</div>'
              +'<div class="col-xs-3" style="text-align: center;"><img src="mipmap/speed.png"><br/><label>'+msg[i].speed+' Km/h</label></div>'
              +'</div><div class="row"><div style="text-align: center;"><label>' +msg[i].location+ '</label></div></div><div class="row"><div class="col-xs-4" style="text-align: center;"><button class="btn btn-success btn-xs" onclick="calldeviceplayback('+msg[i].did+')"><i class="fa fa-play" aria-hidden="true"></i>Playback</button> </div><div class="col-xs-4" style="text-align: center;"><button class="btn btn-primary btn-xs" onclick="calldeviceonmap('+msg[i].did+')"><i class="fa fa-location-arrow" aria-hidden="true"></i>Liveview</button><br/></div><div class="col-xs-4" style="text-align: center;"><button class="btn btn-warning btn-xs" onclick="gettodaysplayback(\''+didname+'\')"><i class="fa fa-paper-plane-o" aria-hidden="true">path</i></button><br/></div>'
              +'</div></div></div></div>';
          }
        //  alert(tableheader+tablebody);
        
    	  
    	  //body+='<tr><td>'+msg[i].devicename+'</td><td>'+msg[i].datetime+'</td><td>'+Ignition+'</td><td>'+msg[i].Speed+'</td><td>'+AC+'</td><td>'+GPS+'</td><td>'+msg[i].Location+'</td><td>'+msg[i].Altitude+'</td><td>'+msg[i].Fuel+'</td><td>'+msg[i].Power+'</td><td><button type="button" class="btn btn-primary" data-toggle="modal" data-target="#dialog-modal" onclick="openmap('+msg[i].Latitude+','+msg[i].Langitude+','+i+')"> View</button></td></tr>';
      
     }
     $("#Lasttrackreport").html(initdiv+divbody+closediv);
      //$("#Lasttrackreport").html(table+body+"</tbody></table>");
    }
});
function gettodaysplayback(did)
{
//	$("#did").val(did);
    //  alert(did);
	viewpathonmap(did);
 
}
</script>
 
     
<div id="Lasttrackreport"></div>

    </body>
</html>


